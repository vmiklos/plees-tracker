{"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"ops":[{"type":3,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691783554,"metadata":{"github-id":"IC_kwDODbKJfs5j2vHe","github-url":"https://github.com/vmiklos/plees-tracker/issues/406#issuecomment-1675293150"},"nonce":"dgaBuEUvMwhHTkO/3ThKNCKiI6A=","message":"I guess this is the interesting part of the logcat, which doesn't look sensitive at all:\n\n```\nFATAL EXCEPTION: main\nProcess: hu.vmiklos.plees_tracker, PID: 5558\njava.io.FileNotFoundException: Failed to open document for writing plees-tracker.csv\n        at android.database.DatabaseUtils.readExceptionWithFileNotFoundExceptionFromParcel(DatabaseUtils.java:151)\n        at android.content.ContentProviderProxy.openAssetFile(ContentProviderNative.java:705)\n        at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1860)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1562)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1537)\n        at hu.vmiklos.plees_tracker.DataModel.exportDataToFile(DataModel.kt:290)\n        at hu.vmiklos.plees_tracker.DataModel$exportDataToFile$1.invokeSuspend(Unknown Source:18)\n```\n\nNote how openOutputStream() normally either returns a null or an output stream, but here is it throws an exception.\n\nExport to nextcloud works for me (and also import back), so there are two problems here:\n\n1) The storage access framework fails for you when this app talks to nextcloud, but it's unclear why. Apart from \"failed to open\", no details are given.\n\n2) If there is a failure, then that failure is not reported. This is something I can reproduce by an artificially injected exception.\n\nI suggest let's focus on 2) here and let's have a separate, follow-up issue for 1). I hope that makes sense, to not have half-fixed issues lingering around.","files":null},{"type":6,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784042,"metadata":{"github-id":"UCE_lALODbKJfs5j2vHezjWoYhc"},"nonce":"afdFoo0op0Sz5Et1o7uKCB7oR24=","target":"37576e18d2d65d38fb82bbb695956241e9c48d756962912ec8ad3859f1433011","message":"I guess this is the interesting part of the logcat, which doesn't look sensitive at all:\n\n```\nFATAL EXCEPTION: main\nProcess: hu.vmiklos.plees_tracker, PID: 5558\njava.io.FileNotFoundException: Failed to open document for writing plees-tracker.csv\n        at android.database.DatabaseUtils.readExceptionWithFileNotFoundExceptionFromParcel(DatabaseUtils.java:151)\n        at android.content.ContentProviderProxy.openAssetFile(ContentProviderNative.java:705)\n        at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:1860)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1562)\n        at android.content.ContentResolver.openOutputStream(ContentResolver.java:1537)\n        at hu.vmiklos.plees_tracker.DataModel.exportDataToFile(DataModel.kt:290)\n        at hu.vmiklos.plees_tracker.DataModel$exportDataToFile$1.invokeSuspend(Unknown Source:18)\n```\n\nNote how openOutputStream() normally either returns a null or an output stream, but here is it throws an exception.\n\nExport to nextcloud works for me (and also import back), so there are two problems here:\n\n1) The storage access framework (SAF) fails for you when this app talks to nextcloud, but it's unclear why. Apart from \"failed to open\", no details are given.\n\nSome ideas:\n\n- if there is an other open source app that does work for you to write on nextcloud, that would be interesting, we could compare how plees tracker uses SAF vs the working app. Perhaps there is some new requirement (these are growing like mushrooms as you update Android) that we're missing on our side.\n\n- do you have something custom like a manually installed ROM or something? I'm trying to reproduce with a vendor-provided ROM on a Pixel device, though this really should just work everywhere.\n\n2) If there is a failure, then that failure is not reported. This is something I can reproduce by an artificially injected exception.\n\nI suggest let's focus on 2) here and let's have a separate, follow-up issue for 1). I hope that makes sense, to not have half-fixed issues lingering around.","files":null},{"type":5,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784225,"metadata":{"github-id":"UNLE_lADODbKJfs5t3zSozwAAAAJYa72l"},"nonce":"jqT4apCDD1UMpuCEr9BA41C3vHY=","added":[],"removed":["needinfo"]},{"type":5,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784225,"metadata":{"github-id":"LE_lADODbKJfs5t3zSozwAAAAJYa72r"},"nonce":"H8FoE5O6urkjrM4zm0Wyf4xHVNI=","added":["bug"],"removed":[]},{"type":5,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784225,"metadata":{"github-id":"LE_lADODbKJfs5t3zSozwAAAAJYa720"},"nonce":"272a0HQ+XQkGWlSMQn+y4aH4DFo=","added":["confirmed"],"removed":[]},{"type":3,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784260,"metadata":{"github-id":"IC_kwDODbKJfs5j2yHf","github-url":"https://github.com/vmiklos/plees-tracker/issues/406#issuecomment-1675305439"},"nonce":"9OIZtwMhcGyIGityIryzroU2y90=","message":"Labeling as confirmed for the \"toast reports success even on failure\" part.","files":null},{"type":4,"author":{"id":"471a882371b38fe965ac5b5f66a4a0c62ced8f63a4bd237bb22a92fe2326cd3e"},"timestamp":1691784825,"metadata":{"github-id":"CE_lADODbKJfs5t3zSozwAAAAJYbLhe"},"nonce":"cWn4dO5MS6BkUPb1H2tUzRaOd8A=","status":2}]}