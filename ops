{"author":{"id":"a23dbe11585b9b69511f29df422c106599dc6167b2dc00ea9d6e86e8b3388efd"},"ops":[{"type":1,"author":{"id":"a23dbe11585b9b69511f29df422c106599dc6167b2dc00ea9d6e86e8b3388efd"},"timestamp":1619269452,"metadata":{"github-id":"MDU6SXNzdWU4NjY3NDE2OTc=","github-url":"https://github.com/vmiklos/plees-tracker/issues/138","origin":"github"},"nonce":"LYQabmSZOXadzr9+iWzA3Vb9xLc=","title":"Automatic backup does not happen after editing a sleep","message":"**Reproducer steps**\n1. Create a sleep with start/stop\n2. Backup file gets automatically updated\n3. Edit a sleep\n\n**Actual result**\nBackup file stays the same\n\n**Expected behavior**\nBackup file should get updated after editing as well. Without this, the backup stays out of date whenever a sleep is edited.\n\n**Cause**\nbackupSleeps() only gets called inside startStop() inside the main activity:\nhttps://github.com/vmiklos/plees-tracker/blob/c82a64841d883b29d18ae47f7ae6b0276b27f298/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L263-L267\n\nbut not inside updateSleep():\nhttps://github.com/vmiklos/plees-tracker/blob/c82a64841d883b29d18ae47f7ae6b0276b27f298/app/src/main/java/hu/vmiklos/plees_tracker/SleepViewModel.kt#L71-L76","files":null}]}