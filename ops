{"version":2,"ops":[{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1579540404,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3NjM2NDU5OA==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-576364598"},"message":"Indeed. This used to work.. now all I get is `java.io.IOException: Stream Closed`. I'll see what's going on here, thanks for reporting.","files":null},{"type":5,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1579540447,"metadata":{"github-id":"MDEyOkxhYmVsZWRFdmVudDI5NjM2OTQyODE="},"added":["confirmed"],"removed":[]},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1579679542,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3NzA1MjI2MQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-577052261"},"message":"This now works for me. How did you install plees tracker, fdroid? If so, I should probably cut a release. :-)","files":null},{"type":4,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1579679542,"metadata":{"github-id":"MDExOkNsb3NlZEV2ZW50Mjk2OTAwOTc5Ng=="},"status":2},{"type":3,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1579679909,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3NzA1NDA1OQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-577054059"},"message":"Yes, I downloaded it from f-droid. I'll try it as soon as you release it!","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1579767516,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3NzU3NDMyOQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-577574329"},"message":"v4.0 is out now, ETA for the fdroid build is a ~week.","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1580291960,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3OTY4MDg4Nw==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-579680887"},"message":"\u003chttps://gitlab.com/fdroid/fdroiddata/commit/8b55e5b87daaaf974d76faedab2b38abdcfbfcf1\u003e picked up the release, now waiting for a build to appear at \u003chttps://f-droid.org/repo/hu.vmiklos.plees_tracker_4.apk\u003e.","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1580332878,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU3OTk2NTM3Ng==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-579965376"},"message":"Now even the apk is there: https://f-droid.org/repo/hu.vmiklos.plees_tracker_4.apk, one week as ETA wasn't that off. :-)","files":null},{"type":3,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1580735298,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTQwNTQwMg==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581405402"},"message":"So, a few days ago I tried importing a csv again after updating to v4.0, and once again I couldn't open any file from the system's file selector. Everything was still greyed out.\nAnd I now just realized why: your app does not have the system permission to access files in memory! In fact, it doesn't even request that permission from the system.\n\nHowever, I was still able to import a file from an external file manager (I'm using Simple File Manager), which does have memory access.","files":null},{"type":3,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1580735841,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTQwODk2Mw==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581408963"},"message":"Also, would it be possible to have a way to edit each recorded entry? Sometimes I forget to press start before falling asleep, and manually editing unix timestamps is kind of a pain. Maybe tapping/long pressing an entry could open a date and time editor (like google calendar's, for example) and allow the user to change the start and stop time and date.","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1580737451,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTQyMDAwNw==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581420007"},"message":"\u003e And I now just realized why: your app does not have the system permission to access files in memory! In fact, it doesn't even request that permission from the system.\n\nOh, this is interesting. Do you rename the file between the export and import? You're right, reading https://github.com/vmiklos/plees-tracker/blob/862fdd74e542a62035fa5920bdb82baf5a8c598e/app/src/main/java/hu/vmiklos/plees_tracker/DataModel.kt#L92 shows that export calls takePersistableUriPermission(), while import does not. I always tested import with a file that was previously exported. ;-)\n\n\u003e Also, would it be possible to have a way to edit each recorded entry?\n\nSure, why not. But please open a separate issue for that.","files":null},{"type":3,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1580738759,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTQyOTQ4OQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581429489"},"message":"\u003e I always tested import with a file that was previously exported.\nMe too: I exported the file, changed an entry, then tried to import it back.\n\n\u003e But please open a separate issue for that.\nOk, I'll do that right away. Thank you!","files":null},{"type":6,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1580738759,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdDM0ODAwMzgwMg=="},"target":"d8220f13b130dad0b1910b6ee27882a1d96c24442c8abbb202c99ee24fe5ad63","message":"\u003e I always tested import with a file that was previously exported.\n\nMe too: I exported the file, changed an entry, then tried to import it back.\n\n\u003e But please open a separate issue for that.\n\nOk, I'll do that right away. Thank you!","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1580744525,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTQ3NTIxMA==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581475210"},"message":"OK, then I need more info: how did you change it? What I tried is:\n\n1) Open plees, menu -\u003e export -\u003e accept to put plees-tracker.csv to Downloads.\n2) Open the Files app, go to Downloads, long push on plees-tracker.csv, \"...\" menu, copy to, select \"Copy\" to create \"plees-tracker (1).csv\".\n3) Go back to plees, menu -\u003e import -\u003e select \"plees-tracker (1).csv\" -\u003e \"import finished successfully\".\n\nDoes this fail for you?","files":null},{"type":3,"author":{"id":"9aa41738ff285f3219f5dc28b567c71ea029e4a4"},"timestamp":1580747727,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTUwMTk3OA==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581501978"},"message":"Yes, it does. Everything is still greyed out. I can only import a file if I open the toast menu on the top left and use my file manager to select the file.\n![Screenshot 1](https://i.imgur.com/yRuYoQA.jpg)\n![Screenshot 2](https://i.imgur.com/WpGxgiX.jpg)","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1580757847,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDU4MTU3NjE4OQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-581576189"},"message":"Okay, I don't have an idea about this additional problem at the moment, glad that you have a workaround ;-)","files":null},{"type":3,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590238727,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYzMzA0ODI2MA==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-633048260"},"message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, [this](https://github.com/SebiderSushi/plees-tracker/commit/b4acd95aa31768696a8483231b622de5dcadb6bb) is how it works as expected on my device (android 9).\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to do it.","files":null},{"type":6,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590238727,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzc0MTU5Mjkw"},"target":"b3b5bf83c198a52e31500f660ce3301eb08a9033af278f66db68933fb6ffdb15","message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, b4acd95aa31768696a8483231b622de5dcadb6bb is how it works as expected on my device (android 9).\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to do it.","files":null},{"type":6,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590240394,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzc0MTYxMTcz"},"target":"b3b5bf83c198a52e31500f660ce3301eb08a9033af278f66db68933fb6ffdb15","message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, b4acd95aa31768696a8483231b622de5dcadb6bb is how it works as expected on my device (android 9).\n**Note that the `text/*` type cannot be ommited,** as it __widens__ the filter to files matching this type, while the intent extra only __narrows__ down the selection to filter out any unmatching files. Ommiting the type would hence not accept any file.\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to do it.","files":null},{"type":6,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590240425,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzc0MTYxMTkx"},"target":"b3b5bf83c198a52e31500f660ce3301eb08a9033af278f66db68933fb6ffdb15","message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, b4acd95aa31768696a8483231b622de5dcadb6bb is how it works as expected on my device (android 9).\n**Note that the `text/*` type cannot be ommited,** as it _widens_ the filter to files matching this type, while the intent extra only _narrows_ down the selection to filter out any unmatching files. Ommiting the type would hence not accept any file.\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to do it.","files":null},{"type":6,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590329575,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzc0MjQxMDI4"},"target":"b3b5bf83c198a52e31500f660ce3301eb08a9033af278f66db68933fb6ffdb15","message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, b4acd95aa31768696a8483231b622de5dcadb6bb is how it works as expected on my device (android 9).\n**Note that the `text/*` type cannot be ommited,** as it _widens_ the filter to files matching this type, while the intent extra only _narrows_ down the selection to filter out any unmatching files. Ommiting the type would hence not accept any file.\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to, let's say, csv values saved in a `.txt` file.","files":null},{"type":6,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1590329600,"metadata":{"github-id":"MDE1OlVzZXJDb250ZW50RWRpdElzc3VlQ29tbWVudEVkaXQ6Mzc0MjQxMDU2"},"target":"b3b5bf83c198a52e31500f660ce3301eb08a9033af278f66db68933fb6ffdb15","message":"As it seems this is an issue with the mime type:\n\nhttps://github.com/vmiklos/plees-tracker/blob/508f8caefd358e65276a534ba2eabf4d7ea8e9ac/app/src/main/java/hu/vmiklos/plees_tracker/MainActivity.kt#L160\n\nFirst, [i figured out](https://stackoverflow.com/a/28172086) that if you specify `text/*` as the mime type, the csv file can be selected and imported (naturally other text files as well).\n\nThen i found that while importing, `ContentResolver.getType()` returned `text/comma-separated-values` for the uri passed onto `ViewModel.importData()`.  \nSo in lights of [another answer]( https://stackoverflow.com/a/43634560) from the stackoverflow link, b4acd95aa31768696a8483231b622de5dcadb6bb is how it works as expected on my device (android 9).\n**Note that the `text/*` type cannot be ommited,** as it _widens_ the filter to files matching this type, while the intent extra only _narrows_ down the selection to filter out any unmatching files. Ommiting the type would hence not accept any file.\n\nHowever, if data integrity is ensured (i.e. the parser can be expected to not trip over other text files), i think just specifiying the mimeType as `text/*` can be useful as well, in case an android device has yet another way of specifying the mime type or simply misinterprets it.\nIn my opinion, a user can be endowed with the \"responsibility\" of selecting the right file and might even want to, let's say, import csv values saved in a `.txt` file.","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1590438765,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDYzMzcwODUxOQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-633708519"},"message":"Interesting. I just tested this manually, master works here just fine. Though I'm on Android 10. I also wrote an androidTest for this back then (see testImportExport() in app/src/androidTest/java/hu/vmiklos/plees_tracker/MainActivityInstrumentedTest.kt), and Travis intentionally runs on Android 5.1 (API level 22).\n\nAnyhow, perhaps the test is poor and there is still to be fixed here. :-) PRs are welcome, as long as the already working cases keep working.","files":null},{"type":3,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1592082444,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0MzY3ODQ1MQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-643678451"},"message":"I don't think this can properly be tested as the issue is with the behavior of the files picker of the android system, and thus external to `plees-tracker`. I can't think of any proper test in this situation.\n`plees-tracker` isn't where there are problems with the mime type handling, it is just the android file picker who does not accept selecting the proper file because it represents the mimeType differently.\n\nI suggest to merge my commit, or decide that all plain text files are acceptable for the parser and just change the `intent.type` to `text/*`.","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1592084407,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0MzY4MTg1NQ==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-643681855"},"message":"Fine, could you please submit a pull request with your commit in it?\n\nIf it clearly states this is a workaround for non-Google Android flavors (or old Android versions, etc), I don't mind :-)","files":null},{"type":3,"author":{"id":"5b75d5cae88e0cf727a5414d6fe8e0d35fc53b4b"},"timestamp":1592085549,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0MzY4MzU0MA==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-643683540"},"message":"Well the thing is i have no clue where this is coming from or whether it could be called \"non-Google\".\nI have absolutely no background info. All i did was capture the uri passed into `ViewModel.importData()` and find out what was returned by `ContentResolver.getType()`.\nI tested this on LineageOS 15.1 (oreo) and 16.0 (pie) and i doubt very much that they'd change such a thing.\n\n**TL;DR: I cannot say what exactly this workaround is for, it could be researched but honestly - what could be gained from it?**","files":null},{"type":3,"author":{"id":"5f62520189493efa8eb074e55b62ab5df3a30e68"},"timestamp":1592114197,"metadata":{"github-id":"MDEyOklzc3VlQ29tbWVudDY0MzcyMjk0Mg==","github-url":"https://github.com/vmiklos/plees-tracker/issues/1#issuecomment-643722942"},"message":"Thanks, I'll take a look.","files":null}]}